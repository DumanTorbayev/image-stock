(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{12:function(e,t,a){e.exports={head:"PhotoDetail_head__3UPvz",head__top:"PhotoDetail_head__top__2jeNP",background:"PhotoDetail_background__1DQLg",blur:"PhotoDetail_blur__2Zryt",user:"PhotoDetail_user__2RjaB",user__avatar:"PhotoDetail_user__avatar__DNY_5",user__name:"PhotoDetail_user__name__31Yyl",buttons:"PhotoDetail_buttons__3bi_a","img-container":"PhotoDetail_img-container__1fACQ"}},14:function(e,t,a){e.exports={card:"PhotoItem_card__2EsHO",card__info:"PhotoItem_card__info__3z4yA",card__overlay:"PhotoItem_card__overlay__1V2ys",owner:"PhotoItem_owner__1Jc9N",owner__img:"PhotoItem_owner__img__3Xx-h",owner__name:"PhotoItem_owner__name__2KYpW",actions:"PhotoItem_actions__IByIU",actions__item:"PhotoItem_actions__item__2gXoe"}},20:function(e,t,a){e.exports={header:"Header_header__26D_V",header__top:"Header_header__top__M4u2y",logo:"Header_logo__2X7Sr",favorites:"Header_favorites__2NT_q"}},24:function(e,t,a){e.exports={"grid-container":"PhotoGrid_grid-container__1FlHB",grid:"PhotoGrid_grid__1cICr",column:"PhotoGrid_column__2ZqEo"}},29:function(e,t,a){e.exports={"download-link":"DownloadLink_download-link__3As0-","inner-page":"DownloadLink_inner-page__3owtT",inCard:"DownloadLink_inCard__wSbAX"}},30:function(e,t,a){e.exports={"in-favorite":"Button_in-favorite__3t2F8","inner-page":"Button_inner-page__2zB8O",inCard:"Button_inCard__31FP5"}},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchPhotoById",(function(){return y})),a.d(n,"fetchRelatedPhoto",(function(){return I})),a.d(n,"fetchPhotos",(function(){return k}));var o={};a.r(o),a.d(o,"handleFetchPhotos",(function(){return S})),a.d(o,"handleFetchRelatedPhotos",(function(){return H}));var c={};a.r(c),a.d(c,"handleFetchPhotoById",(function(){return L}));var r=a(0),s=a(21),i=a.n(s),l=a(3),d=a(20),h=a.n(d),u=a(13),j=a.p+"static/media/logo.a2ae2b09.svg",_=a.p+"static/media/heart-icon.b07158dd.svg",p=a(1),f=function(){return Object(p.jsx)("header",{className:h.a.header,children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:h.a.header__top,children:[Object(p.jsxs)(u.b,{to:"/",className:h.a.logo,children:[Object(p.jsx)("img",{src:j,alt:""}),"ImageStock"]}),Object(p.jsxs)(u.b,{to:"/favorites",className:h.a.favorites,children:[Object(p.jsx)("img",{src:_,alt:""}),"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"]})]})})})},b=a(11),m=a(17),O=m.c,x=a(9),v=a(15),g=a.n(v),P=a(19),w=a(4),N=a(39),C=a.n(N).a.create({baseURL:"".concat("https://api.unsplash.com"),headers:{Authorization:"Client-ID ".concat("aSYhBi-PmFalxBwhNsyx6xPVN6zQfPblmDEaPxuG8vk")}}),y=function(e){return C.get("/photos/".concat(e.id))},I=function(e){return C.get("/photos/".concat(e.id,"/related"))},k=function(e,t){return C.get("/photos",{params:{page:e,per_page:t}})},D=Object(b.a)({},n),B=D.fetchPhotos,F=D.fetchRelatedPhoto,S=Object(w.b)("photos/fetchPhotos",function(){var e=Object(P.a)(g.a.mark((function e(t){var a,n,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.page,n=t.limit,e.prev=1,e.next=4,B(a,n);case 4:return o=e.sent,e.abrupt("return",o.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),H=Object(w.b)("photos/fetchRelatedPhotos",function(){var e=Object(P.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:return a=e.sent,e.abrupt("return",a.data.results);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),R=D.fetchPhotoById,L=Object(w.b)("photo/fetchPhotoById",function(){var e=Object(P.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),E=Object(w.c)({name:"photoCollection",initialState:{photos:[],loading:!1,error:null,page:1,limit:15},reducers:{setPhotoPage:function(e,t){e.page=t.payload},clearPhotos:function(e){e.photos.splice(0,e.photos.length)}},extraReducers:function(e){e.addCase(S.fulfilled,(function(e,t){e.photos=e.photos.concat(t.payload)})),e.addCase(H.fulfilled,(function(e,t){e.photos=t.payload}))}}),z=E.actions,A=z.setPhotoPage,J=z.clearPhotos,M=E.reducer,V=Object(w.c)({name:"favorite",initialState:{photos:[],deletedId:null,checkedId:null},reducers:{setIsDelete:function(e,t){e.deletedId=t.payload},setIsChecked:function(e,t){e.deletedId=t.payload},setFavoritesPhoto:function(e,t){e.photos=t.payload}}}),Z=V.actions,G=Z.setIsDelete,T=Z.setIsChecked,X=Z.setFavoritesPhoto,Y=V.reducer,Q=Object(b.a)(Object(b.a)(Object(b.a)({},o),c),{},{setPhotoPage:A,clearPhotos:J,setIsDelete:G,setIsChecked:T,setFavoritesPhoto:X}),U=function(){var e=Object(m.b)();return Object(x.b)(Q,e)},q=(a(72),function(){return Object(p.jsx)("div",{className:"spinner",children:Array.from({length:12}).map((function(e,t){return Object(p.jsx)("div",{},"".concat(e,"/").concat(t))}))})}),K=a(24),W=a.n(K),$=a(42),ee=a(14),te=a.n(ee),ae=a.p+"static/media/maximize-icon.b83ef4c1.svg",ne=a(29),oe=a.n(ne),ce=a(23),re=a.n(ce),se=function(e){var t=e.children,a=e.downloadSrc,n=e.type;e.className;return Object(p.jsxs)("a",{className:re()(oe.a["download-link"],oe.a[n]),href:a,download:!0,target:"_blank",rel:"noreferrer",children:[Object(p.jsx)("svg",{viewBox:"0 0 20 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.25 9.45837H16.5025C17.7633 9.45837 18.3867 10.9884 17.4942 11.8809L10.9917 18.3834C10.4392 18.9359 9.54668 18.9359 8.99418 18.3834L2.49168 11.8809C1.59918 10.9884 2.23668 9.45837 3.49751 9.45837H5.75001V2.37504C5.75001 1.59587 6.38751 0.958374 7.16668 0.958374H12.8333C13.6125 0.958374 14.25 1.59587 14.25 2.37504V9.45837ZM1.50001 25.0417C0.720844 25.0417 0.0833435 24.4042 0.0833435 23.6251C0.0833435 22.8459 0.720844 22.2084 1.50001 22.2084H18.5C19.2792 22.2084 19.9167 22.8459 19.9167 23.6251C19.9167 24.4042 19.2792 25.0417 18.5 25.0417H1.50001Z",fill:"white"})}),t]})},ie=a(30),le=a.n(ie),de=function(e){var t=e.type,a=e.className,n=e.onClick;return Object(p.jsx)("button",{onClick:n,className:re()(le.a["in-favorite"],a,le.a[t]),children:Object(p.jsx)("svg",{viewBox:"0 0 23 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(p.jsx)("path",{d:"M13.0516 20.2443C12.1779 21.0597 10.8329 21.0597 9.95928 20.2325L9.83283 20.1143C3.79765 14.501 -0.145337 10.8257 0.00410514 6.24047C0.0730786 4.23147 1.07319 2.30521 2.69407 1.17072C5.7289 -0.956453 9.47646 0.0362259 11.4997 2.47065C13.5229 0.0362259 17.2705 -0.96827 20.3053 1.17072C21.9262 2.30521 22.9263 4.23147 22.9953 6.24047C23.1562 10.8257 19.2017 14.501 13.1665 20.138L13.0516 20.2443Z"})})})},he=function(e,t){localStorage.setItem(e,JSON.stringify(t))},ue=function(e){return JSON.parse(localStorage.getItem(e))},je=function(e,t){var a=ue("favorites"),n=a||[],o=n.findIndex((function(t){return t.id===e.id}));-1!==o?(n.splice(o,1),he("favorites",n),t(e.id)):(n.push(e),he("favorites",n))},_e=function(e){var t=e.id,a=e.user,n=e.links,o=e.urls,c=e.alt_description,r=U().setIsDelete,s=a.name,i=a.profile_image,l=o.small,d=n.download;return Object(p.jsxs)("div",{className:te.a.card,children:[Object(p.jsxs)("div",{className:te.a.card__info,children:[Object(p.jsx)("div",{className:te.a.card__overlay}),Object(p.jsxs)("div",{className:te.a.owner,children:[Object(p.jsx)("img",{className:te.a.owner__img,src:i.large,alt:s}),Object(p.jsx)("div",{className:te.a.owner__name,children:s})]}),Object(p.jsxs)("div",{className:te.a.actions,children:[Object(p.jsx)(de,{onClick:function(){return je({id:t,user:a,links:n,urls:o,alt_description:c},r)},type:"inCard"}),Object(p.jsx)(u.b,{to:"/photo/".concat(t),className:te.a.actions__item,children:Object(p.jsx)("img",{src:ae,alt:"maximize"})}),Object(p.jsx)(se,{downloadSrc:d,type:"inCard"})]})]}),Object(p.jsx)("img",{"data-id":t,src:l,alt:c})]})},pe={default:3,1024:2,576:1},fe=function(e){var t=e.photos,a=e.children;return Object(p.jsxs)("div",{className:W.a["grid-container"],children:[a,Object(p.jsx)($.a,{breakpointCols:pe,className:W.a.grid,columnClassName:W.a.column,children:t?t.map((function(e,t){return Object(p.jsx)(_e,Object(b.a)({},e),"".concat(e.id).concat(t))})):""})]})},be=a(12),me=a.n(be),Oe=function(e){var t=e.id,a=e.user,n=e.urls,o=e.alt_description,c=e.links,r=U().setIsDelete,s=a.profile_image,i=a.name,l=n.regular,d=(n.small,c.download);return Object(p.jsxs)("div",{className:me.a.head,children:[Object(p.jsx)("div",{className:me.a.background,style:{backgroundImage:"url(".concat(l,")")},children:Object(p.jsx)("div",{className:me.a.blur})}),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("div",{className:me.a.head__top,children:[Object(p.jsxs)("div",{className:me.a.user,children:[Object(p.jsx)("img",{className:me.a.user__avatar,src:s.large,alt:""}),Object(p.jsx)("div",{className:me.a.user__name,children:i})]}),Object(p.jsxs)("div",{className:me.a.buttons,children:[Object(p.jsx)(de,{onClick:function(){return je({id:t,user:a,links:c,urls:n,alt_description:o},r)},type:"inner-page"}),Object(p.jsx)(se,{downloadSrc:d,type:"inner-page",children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"})]})]}),Object(p.jsx)("div",{className:me.a["img-container"],children:Object(p.jsx)("img",{src:l,alt:o})})]})]})},xe=function(e){return e.photoCollection},ve=function(e){return e.photo},ge=function(){var e=O(ve),t=e.photo,a=e.loading,n=O(xe).photos,o=U(),c=o.handleFetchPhotoById,s=o.handleFetchRelatedPhotos,i=Object(l.e)();return Object(r.useEffect)((function(){c(i),s(i),window.scrollTo({top:0})}),[i.id]),a?Object(p.jsx)(q,{}):Object(p.jsxs)(p.Fragment,{children:[t&&Object(p.jsx)(Oe,Object(b.a)({},t)),Object(p.jsx)("div",{className:"container",children:Object(p.jsx)(fe,{photos:n,children:Object(p.jsx)("h3",{children:"\u041f\u043e\u0445\u043e\u0436\u0438\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438"})})})]})},Pe=a(40),we=function(){var e=O(xe),t=e.photos,a=(e.loading,e.page),n=e.limit,o=U(),c=o.handleFetchPhotos,s=o.setPhotoPage,i=o.clearPhotos;Object(r.useEffect)((function(){i()}),[]),Object(r.useEffect)((function(){c({page:a,limit:n})}),[a,n]);return Object(p.jsx)("div",{className:"container",children:Object(p.jsx)(Pe.a,{next:function(){s(a+1)},hasMore:!0,loader:"",dataLength:t.length,scrollThreshold:.7,children:Object(p.jsx)(fe,{photos:t})})})},Ne=function(e){return e.favorite},Ce=function(){var e=O(Ne),t=e.photos,a=e.deletedId,n=U().setFavoritesPhoto;return Object(r.useEffect)((function(){n(ue("favorites"))}),[a]),Object(p.jsx)("div",{className:"container",children:Object(p.jsx)(fe,{photos:t})})},ye=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{}),Object(p.jsx)(l.a,{exact:!0,path:"/",children:Object(p.jsx)(we,{})}),Object(p.jsx)(l.a,{path:"/photo/:id",children:Object(p.jsx)(ge,{})}),Object(p.jsx)(l.a,{path:"/favorites",children:Object(p.jsx)(Ce,{})})]})},Ie=(a(73),a(41)),ke=Object(w.c)({name:"photo",initialState:{photo:null,loading:!1},reducers:{},extraReducers:function(e){e.addCase(L.pending,(function(e){e.loading=!0})),e.addCase(L.fulfilled,(function(e,t){e.photo=t.payload,e.loading=!1}))}});Object(Ie.a)(ke.actions);var De=ke.reducer,Be=Object(x.c)({photoCollection:M,photo:De,favorite:Y}),Fe=Object(w.a)({reducer:Be});i.a.render(Object(p.jsx)(u.a,{children:Object(p.jsx)(m.a,{store:Fe,children:Object(p.jsx)(ye,{})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.328c7c4a.chunk.js.map